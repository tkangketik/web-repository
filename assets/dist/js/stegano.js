function handleFileSelect(evt){var original=document.getElementById("original"),stego=document.getElementById("stego"),img=document.getElementById("img"),cover=document.getElementById("cover"),message=document.getElementById("message");if(original&&stego)for(var files=evt.target.files,i=0,f;f=files[i];i++)if(f.type.match("image.*")){var reader=new FileReader;reader.onload=function(theFile){return function(e){img.src=e.target.result,img.title=escape(theFile.name),stego.className="half invisible",cover.src="",message.innerHTML="",message.parentNode.className="invisible",updateCapacity()}}(f),reader.readAsDataURL(f)}}function hide(){var stego=document.getElementById("stego"),img=document.getElementById("img"),cover=document.getElementById("cover"),message=document.getElementById("message"),textarea=document.getElementById("text"),download=document.getElementById("download");img&&textarea&&(cover.src=steg.encode(textarea.value,img),stego.className="half",message.innerHTML="",message.parentNode.className="invisible",download.href=cover.src.replace("image/png","image/octet-stream"))}function read(){var img=document.getElementById("img"),cover=document.getElementById("cover"),message=document.getElementById("message"),textarea=document.getElementById("text");img&&textarea&&(message.innerHTML=steg.decode(img),""!==message.innerHTML&&(message.parentNode.className="",textarea.value=message.innerHTML,updateCapacity()))}function updateCapacity(){var img=document.getElementById("img"),textarea=document.getElementById("text");img&&text&&(document.getElementById("capacity").innerHTML="("+textarea.value.length+"/"+steg.getHidingCapacity(img)+" karakter)")}window.onload=function(){document.getElementById("file").addEventListener("change",handleFileSelect,!1),document.getElementById("hide").addEventListener("click",hide,!1),document.getElementById("read").addEventListener("click",read,!1),document.getElementById("text").addEventListener("keyup",updateCapacity,!1),hide(),updateCapacity()};